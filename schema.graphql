type Protocol @entity {
  id: String!
  accounts: Int!
  tradingFees: BigDecimal!
}

type Account @entity {
  id: Bytes!
  shareSupply: Int!
  tradingFees: BigDecimal!
  lastTradePrice: BigDecimal!
  joined: Int!
  positions: [Position!]! @derivedFrom(field: "owner")
  shareholders: [Position!]! @derivedFrom(field: "subject")
}

type Position @entity {
  id: Bytes!
  owner: Account! # address
  subject: Account! # address
  shares: Int!
}

type Trade @entity(immutable: true) {
  id: Bytes!
  trader: Account! # address
  subject: Account! # address
  isBuy: Boolean! # bool
  shareAmount: Int! # uint256
  ethAmount: BigDecimal! # uint256
  protocolEthAmount: BigDecimal! # uint256
  subjectEthAmount: BigDecimal! # uint256
  supply: Int! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
